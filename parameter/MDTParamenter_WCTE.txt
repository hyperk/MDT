# Parameter setting 

# Trigger setting
< NDigitsThreshold_PMT3inchR14374_WCTE = 25 >
< NDigitsStepSize_PMT3inchR14374_WCTE = 5 >
< NDigitsPostTriggerWindow_PMT3inchR14374_WCTE = +950. >
< NDigitsPreTriggerWindow_PMT3inchR14374_WCTE = -400. >
< FailurePostTriggerWindow_PMT3inchR14374_WCTE = +950. > # seems to be +950 by default //+100000.
< FailurePreTriggerWindow_PMT3inchR14374_WCTE = -400. >
< FailureTime_PMT3inchR14374_WCTE = 100. >
< NDigitsWindow_PMT3inchR14374_WCTE = 200. >
< TriggerType_PMT3inchR14374_WCTE = NoTrig >

# Dark noise setting
< DarkAddMode_PMT3inchR14374_WCTE = 1 > 
< DarkM0WindowLow_PMT3inchR14374_WCTE = 0. > // ns
< DarkM0WindowUp_PMT3inchR14374_WCTE = 100000. > // ns
< DarkM1Window_PMT3inchR14374_WCTE = 4000. > // ns
< NumOfTubes_PMT3inchR14374_WCTE = 2014 >
< MinTubeID_PMT3inchR14374_WCTE = 1 >
< MaxTubeID_PMT3inchR14374_WCTE = 2014 >
< DarkRate_PMT3inchR14374_WCTE = 1.0 > # kHz

# 3" PMT setting
< PMTDE_PMT3inchR14374_WCTE = $MDTROOT/parameter/wcte_angular_eff.root > # txt file of PMT by PMT detection efficiency relative to WCSim (<=1)
# < PMTTime_PMT3inchR14374_WCTE = $MDTROOT/parameter/PMT_Timing_WCTE.txt > # txt file of PMT by PMT timing offset, only used in Waveform digitizer

# Digitizer setting
< DigiHitIntegrationWindow = 144 >  // ns
< PrecisionTiming = 0.1 > // ns 
< PrecisionCharge = 0. >
< ApplyDAQEfficiency = 1 >

# After pulse setting
< APDoAdd = 0 >

# Output setting
< TimeOffset = 950. >
< FlagMultDigits = 1 >

# Choice of digitizer
< DigitizerType_PMT3inchR14374_WCTE = 0 > # 0 = default WCSim digitizer, 1 = Waveform digitizer

# TQ response used in default WCSim digitizer
< ScalFactorTTS_PMT3inchR14374_WCTE = 1 >
< SPECDFFile_PMT3inchR14374_WCTE = $MDTROOT/parameter/SPE_CDF_PMT3inchR14374_WCTE.txt >
# < AngularResponse_PMT3inchR14374_WCTE = $MDTROOT/parameter/AngularResponse_PMT3inchR14374_WCTE.txt > # additional angular response to scale SPE charge 

# Waveform digitizer setting
< WaveformFile = $MDTROOT/parameter/pmt_sig_ref_phot_fft_iterp_1.txt > # 1PE pulse waveform (amplitude = 2048)
< AmplitudeSigma = 0.37 > # 1PE amplitude sigma in fraction
< WaveformOffset = 0 > # ns
< SamplingInterval = 8 > # ns
< SamplingResolution = 0.1 >
< AmplitudeThreshold = 683 > # self-trigger threshold (1/3 PE)
< IntegralPreceding = 2 >  # self-trigger integral
< IntegralFollowing = 4 > 
< HitInsensitivityPeriod = 8 > # Dead time period
< ChargeWindowBefore = 5 > # charge integration period
< ChargeWindowAfter = 2 >
< ADCToPE = 4627 > # empirical conversion from adc to digi Q
< DigiTimeOffset = -30.1 > # ns, correction to digi T
< SaveWaveform = 1 > # Save the digitized waveform in output